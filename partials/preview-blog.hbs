{{!--
Re-usable card for linking to posts
--}}

<article class="self-center py-2 mb-2 w-full lg:max-w-full first:pt-0 min-w-80 lg:last:mb-0">
    <a class="flex flex-col justify-center text-center sm:flex-row sm:text-left group" href="{{url}}">
      <div class="mx-auto w-40 h-40 sm:mr-6 shrink-0">
        <picture>
          <source 
            srcset="
            {{img_url feature_image size="xxs" format="avif"}} 30w,
            {{img_url feature_image size="xs" format="avif"}} 100w,
            {{img_url feature_image size="s" format="avif"}} 300w,
            {{img_url feature_image size="m" format="avif"}} 600w,
            {{img_url feature_image size="l" format="avif"}} 1200w,
            {{img_url feature_image size="xl" format="avif"}} 2000w"
            {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
            type="image/avif"
            {{^if @first}}loading="lazy"{{/if}}
          >
          <source 
            srcset="
            {{img_url feature_image size="xxs" format="webp"}} 30w,
            {{img_url feature_image size="xs" format="webp"}} 100w,
            {{img_url feature_image size="s" format="webp"}} 300w,
            {{img_url feature_image size="m" format="webp"}} 600w,
            {{img_url feature_image size="l" format="webp"}} 1200w,
            {{img_url feature_image size="xl" format="webp"}} 2000w"
            {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
            type="image/webp"
            {{^if @first}}loading="lazy"{{/if}}

          >
          <img
            srcset="
            {{img_url feature_image size="xxs"}} 30w,
            {{img_url feature_image size="xs"}} 100w,
            {{img_url feature_image size="s"}} 300w,
            {{img_url feature_image size="m"}} 600w,
            {{img_url feature_image size="l"}} 1200w,
            {{img_url feature_image size="xl"}} 2000w"
            {{^if @first}}sizes="(min-width: 1200px) 1200px, 100vw)"{{else}}sizes="(min-width: 800px) 100vw, 700px"{{/if}}
            src="{{img_url feature_image size="m"}}"
            alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}}{{/if}}"
            class="object-cover object-center w-full h-full rounded-xl group-hover:grayscale group-focus-visible:grayscale"
            {{^if @first}}loading="lazy"{{/if}}
          >
        </picture>
      </div>
      <div class="w-full">
        <div class="flex justify-between">
          <h2 class="w-full text-3xl font-semibold sm:w-auto group-hover:underline group-focus-visible:underline">{{title}}</h2>
        </div>
        <span class="text-sm">
          {{> "icons/micro-calendar-days" classname="size-4 inline mb-1"}}
          <time datetime="{{date format="YYYY-MM-DD"}}">{{date format="MMMM DD, YYYY"}}</time>
          <!--
          <span class="px-1 bull">&bull;</span> 
          {{!-- Ugly way to select all besides pics but seems to be the only way? --}}
          {{#has tag="art, pics, ongoing, completed, hardware, software, researching, scrapped, rant"}}
              {{> "icons/micro-clock" classname="size-4 inline mb-1"}} {{reading_time minute="1 min" minutes="% min"}}
          {{/has}}
          -->
        </span>
        <p class="text-heading-color">{{excerpt}}</p>
        <div class="mt-2 text-sm font-semibold">
          {{#if tags}}
            {{#foreach tags}}
              <span class="px-2.5 py-0.5 mx-0.5 tag tag-{{slug}}">{{name}}</span>
            {{/foreach}}
          {{/if}}
        </div>
      </div>
    </a>
</article>
